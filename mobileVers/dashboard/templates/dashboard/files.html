<!--
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version
-->
{% extends "dashboard/layout.html" %}
{% load static %}

{% block body %}

<!--Modal for preview of what we require for SNAP-->
<div id="modalImageInstructions" class="modal-alert">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close2">&times;</span>
      <div class ="fadeSmall"><p style="color: var(--darkblue);"> Please upload your EBT Card from your EBT account, take a screenshot just like the image below. For physical cards, please make sure the name and card number are clear and for ID's, please take both a front and back picture like below.</p></div>
      <div class ="fadeLarge"><p style="color: var(--darkblue);"> Please upload your EBT Card from your EBT account, take a screenshot just like the image below. For physical cards, please make sure the name and card number are clear and for ID's, please take both a front and back picture like below.</p></div>
  
            <br>
            <br>
            <br>
            <div class ="row">
              <div class="fadeSmall"><img src="{% static 'application/images/SampleEBTScreenshot.png' %}" width="300px" height=auto></div>
              <div class="fadeSmall"><img src="{% static 'application/images/ColoradoIDCardSample.jpg' %}" width="500" height=auto></div>
            </div>
            <div class="fadeLarge"><img src="{% static 'application/images/SampleEBTScreenshot.png' %}" width="300px" height=auto></div>
            <div class="fadeLarge"><img src="{% static 'application/images/ColoradoIDCardSample.jpg' %}" width="300px" height=auto></div>
        </div>
  </div>
  

<div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class ="fadeSmall"><p style="color: var(--darkblue);">If you are uploading multiple files, be sure to click and <b>hold</b> the Ctrl key on your keyboard and click on each file. See an example below!</p></div>

      <div class ="fadeLarge"><p style="color: var(--darkblue);">Be sure to take your pictures first and then choose gallery or similar and long press or hold on each item to upload multiple files. See an example below!</p></div>

            <br>
            <br>
            <br>
            <div class="fadeSmall"><img src="{% static 'application/images/Step5InstructionsDesktop.gif' %}"></div>
            <div class="fadeLarge"><img src="{% static 'application/images/Step5InstructionsMobile.gif' %}" width="300px" height=auto></div>

        </div>
</div>




<div class=sideNav>
    <div class=fadeSmall>
        <img style="display: block; margin-left: auto; margin-right: auto; width: 50%;" src="{% static 'application/images/CityLogoWhite-01.png' %}">
        <h1><b>Almost Done!</b></h1>
        <p><b>Why are you asking for these documents?</b></p>
        <p>The documents that you upload will help verify your address and further validate which programs you may be eligible for.</p>
        <p>An identification card can be any of the following:
            <ul>
                <p style="color:white">Colorado Driver's License or Colorado Identification card</p>
                <p style="color:white">A United States Military or Military Dependent's Identification Card</p>
                <p style="color:white">A United States Coast Guard Merchant Mariner card </p>
                <p style="color:white">A Native Tribal Document</p>
                <p style="color:white">Copy of Applicant's Birth Certificate from any States</p>
                <p style="color:white">United States Passport</p>
                <p style="color:white">For a list of more acceptable proof of identification, <a href="https://www.colorado.gov/pacific/sites/default/files/CPED_WIWO_Documents-Proof-Lawful-Presence.pdf" style="color:var(--yellow)">please click here</a></p>
            </ul>
            </p>
    </div>
</div>
<p style="font-weight: 700;"> STEP {{ step }} OF {{ formPageNum }} </p>


{% if message %}
    <div style="color:red; margin-bottom: 5%;">{{ message }} </div>
{% endif %}

            
<div style="margin-top: 3vh;">
    <p>To get verified, please upload your</p>
    <h3> {{program_string|linebreaks}} </h3>
    <!--
    <ul>
        <li> {{program_string}} </li>
    </ul>
    
    <ul>
        <li>{{program_string}}</li>
    </ul>
    -->

    <br>
    <br>
    <p >Uploaded documents are secure & not shared with anyone outside of Fort Collins' income eligible programs. </p>
    
</div>

<div class=fadeLarge><h6> Upload Files Below:</h6></div>
<div class=fadeSmall>
    <br>
    <br>
</div>
<form action="{% url 'dashboard:files' %}" method="post" autocomplete="false" enctype="multipart/form-data">
    {% csrf_token %}
    {% for field in form %}
        {% if form.errors %}
            {% for error in field.errors %}
                <div class="alert alert-danger">
                    <strong>{{ error|escape }}</strong>
                </div>
            {% endfor %}
        {% endif %}
        {% if field.label == "Program" %}
            <div class="row" style="justify-content: space-between;">
                <p style="font-weight: 800;">Files: <buttonQuestion  id="myBtn"><img id src="{% static 'application/images/clipart249308.png' %}" alt="back" style="width:min(4.5vw,20px); display: inline;"></buttonQuestion> </p>
                <select name="{{ field.name }}" id="{{ field.id_for_label}}">

                <!--One selection-->
                {% if program_string|linebreaks|escape == "<p>SNAP Card</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                {% elif program_string|linebreaks|escape == "<p>1040 Form</p>" %}
                    <option class="option files" value="1040 Form"> Tax Form </option>
                {% elif program_string|linebreaks|escape == "<p>Identification</p>" %}
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>Affordable Connectivity Program</p>" %}
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>LEAP Letter</p>" %}
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>

                <!--Two selection-->
                {% elif program_string|linebreaks|escape == "<p>Affordable Connectivity Program<br>Identification</p>" %}
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>Affordable Connectivity Program</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>Identification</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Identification"> Identification </option>

                {% elif program_string|linebreaks|escape == "<p>Identification<br>LEAP Letter</p>" %}
                    <option class="option files" value="LEAP Letter"> LEAP Letter</option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>LEAP Letter</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter</option>
                {% elif program_string|linebreaks|escape == "<p>Affordable Connectivity Program<br>LEAP Letter</p>" %}
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter</option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>LEAP Letter</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter</option>
                    

                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Identification</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>Identification<br>1040 Form</p>" %}
                    <option class="option files" value="1040 Form"> Tax Form </option>
                    <option class="option files" value="Identification"> Identification </option>

                
                <!--Three selection-->
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>Affordable Connectivity Program<br>Identification</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>Identification</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Identification</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>Identification<br>LEAP Letter</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Identification<br>LEAP Letter</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>Affordable Connectivity Program<br>Identification<br>LEAP Letter</p>" %}
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>LEAP Letter</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>LEAP Letter</p>" %}
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>


                <!--Four selection-->
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>Identification</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                {% elif program_string|linebreaks|escape == "<p>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>Identification<br>LEAP Letter</p>" %}                
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>Affordable Connectivity Program<br>Identification<br>LEAP Letter</p>" %}                
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Identification<br>LEAP Letter</p>" %}                
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>LEAP Letter</p>" %}                
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>
                
                <!--Five selection-->
                {% elif program_string|linebreaks|escape == "<p>SNAP Card<br>PSD Reduced Lunch Approval Letter<br>Affordable Connectivity Program<br>Identification<br>LEAP Letter</p>" %}
                    <option class="option files" value="SNAP"> SNAP </option>
                    <option class="option files" value="Free and Reduced Lunch"> Free and Reduced Lunch </option>
                    <option class="option files" value="ACP Letter"> ACP Letter </option>
                    <option class="option files" value="Identification"> Identification </option>
                    <option class="option files" value="LEAP Letter"> LEAP Letter </option>

                {% endif %}
                </select>
            </div>
        {% elif field.label == "Document Upload" %}
            <div class="upload-btn-wrapper" style ="width:100%; align-items: center; margin-top: 3vh;">
                <button class="buttonFileUpload" id="toggleColorButton">
                    <div class="row" style="justify-content: space-between;">
                        <img src="{% static 'dashboard/images/upload.svg' %}" alt="back" style="width:15vw; margin-right: 5vw;">
                        <div style="display:flex; flex-direction:column;align-items:flex-start;">
                            <div class=fadeSmall><p style = "color:white; font-weight: 400;text-align: left; margin-bottom: 5px;">Upload Documents: Upload multiple files by pressing Ctrl and clicking each file. </p></div>
                            <div class=fadeLarge><p style = "color:white; font-weight: 400;text-align: left; margin-bottom: 5px;">Click Here to Upload Documents </p></div>
                            <p style = "color:white;font-weight: 200;">PDF, PNG or JPEG</p>
                        </div>
                    </div>
                </button>
                <input type="file" name ="{{field.name}}" id="document" required multiple>
                <div class="preview"> 
                    <img style ="max-width:100%;" id="preview"/>
                </div>
                {{ field.id_for_label }}
                {{field.name}}
            </div>
        {% endif %}
    {% endfor %}

    <br>
 
    <div class="preview"> 
        <img style ="max-width:100%;" id="preview"/>
    </div>

    <br>
    <div class="footer">
        <button type ="submit" > CONTINUE </button>
    </div>
</form>

<script>
    // Get the modal
    var modal = document.getElementById("myModal");
    
    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");
    
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // When the user clicks the button, open the modal 
    btn.onclick = function() {
      modal.style.display = "block";
    }
    
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
</script>


<script>
    // Get the modal
    var modal = document.getElementById("modalImageInstructions");
    
  
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close2")[0];
    
  
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
    
    <script type='text/javascript'>
        function previewImages() {
            var preview = document.querySelector('#preview');
            if (this.files) {
            [].forEach.call(this.files, readAndPreview);
            }
            function readAndPreview(file) {
            // Make sure `file.name` matches our extensions criteria
            if (!/\.(jpe?g|png|gif)$/i.test(file.name)) {
                return alert(file.name + " is not an image");
            } // else...
            var reader = new FileReader();
            reader.addEventListener("load", function() {
                var image = new Image();
                image.height = 100;
                image.title  = file.name;
                image.src    = this.result;
                preview.appendChild(image);
            });
            reader.readAsDataURL(file);
            document.getElementById("toggleColorButton").style.backgroundColor = 'Green';
            }
        document.getElementById("toggleColorButton").style.backgroundColor = 'Green';
        document.querySelector('#document').addEventListener("change", previewImages);
        }
        
    </script>
  


{% endblock %}